const openButton=document.querySelector("#open-button"),closeButton=document.querySelector("#close-button"),overlay=document.querySelector("#overlay"),infoClick=document.querySelector("#pop-value"),popup=document.querySelector("#popup-content"),resetButton=document.querySelector("#reset-button"),loading=document.querySelector("#loader"),dvTable=document.querySelector("#dvTable");let clickedResults=JSON.parse(localStorage.getItem("click")),customers=[];function getCountTimes(){null==clickedResults&&localStorage.setItem("click",JSON.stringify(0)),5<=clickedResults&&resetButton.classList.add("active"),infoClick.innerHTML=clickedResults}function openPopup(e){null!=e&&(e.classList.add("active"),overlay.classList.add("active"))}function closePopup(){popup.classList.remove("active"),overlay.classList.remove("active")}function addCountTimes(){clickedResults++,localStorage.setItem("click",JSON.stringify(clickedResults)),getCountTimes()}function fetchData(){if(0!=customers.length)return null;setTimeout(function(){loading.classList.remove("end"),fetch("https://jsonplaceholder.typicode.com/users").then(e=>e.json()).then(e=>{loading.classList.add("end"),GenerateTable(e)})},3e3)}function GenerateTable(e){const o=document.createElement("TABLE");o.border="1",customers.push(["NAME","EMAIL","ADRESS","PHONE","COMPANY"]),e.map(e=>{var t=`${e.address.city}, ${e.address.street}, `+e.address.suite;customers.push([e.name,e.email,t,e.phone,e.company.name])});var c=customers[0].length;let n=o.insertRow(-1);for(let t=0;t<customers.length;t++){n=o.insertRow(-1);for(let e=0;e<c;e++){const s=n.insertCell(-1);s.innerHTML=customers[t][e]}}dvTable.innerHTML="",dvTable.appendChild(o)}getCountTimes(),overlay.addEventListener("click",()=>{closePopup()}),openButton.addEventListener("click",()=>{openPopup(popup),addCountTimes(),fetchData()}),closeButton.addEventListener("click",()=>{closePopup()}),resetButton.addEventListener("click",()=>{localStorage.clear(),window.location.reload()});