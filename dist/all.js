const openButton=document.querySelector("#open-button"),closeButton=document.querySelector("#close-button"),overlay=document.querySelector("#overlay"),infoClick=document.querySelector("#pop-value"),popup=document.querySelector("#popup-content"),resetButton=document.querySelector("#reset-button"),loading=document.querySelector("#loader");let clickedResults=JSON.parse(localStorage.getItem("click"));function getCountTimes(){null==clickedResults&&localStorage.setItem("click",JSON.stringify(0)),5<=clickedResults&&(resetButton.classList.add("active"),console.log("button")),infoClick.innerHTML=clickedResults}function openPopup(e){null!=e&&(e.classList.add("active"),overlay.classList.add("active"))}function closePopup(){popup.classList.remove("active"),overlay.classList.remove("active")}function addCountTimes(){clickedResults++,localStorage.setItem("click",JSON.stringify(clickedResults)),getCountTimes()}function fetchData(){loading.classList.remove("finished"),setTimeout(function(){fetch("https://jsonplaceholder.typicode.com/users").then(e=>e.json()).then(e=>{GenerateTable(e),loading.classList.add("finished")})},3e3)}function GenerateTable(e){const o=document.createElement("TABLE");o.border="1";let n=[];n.push(["NAME","EMAIL","ADRESS","PHONE","COMPANY"]),e.map(e=>{var t=`${e.address.city}, ${e.address.street}, `+e.address.suite;n.push([e.name,e.email,t,e.phone,e.company.name])});var c=n[0].length;let l=o.insertRow(-1);for(let t=0;t<n.length;t++){l=o.insertRow(-1);for(let e=0;e<c;e++){const s=l.insertCell(-1);s.innerHTML=n[t][e]}}const t=document.querySelector("#dvTable");t.innerHTML="",t.appendChild(o)}console.log(clickedResults),getCountTimes(),overlay.addEventListener("click",()=>{closePopup()}),openButton.addEventListener("click",()=>{openPopup(popup),addCountTimes(),fetchData()}),closeButton.addEventListener("click",()=>{closePopup()}),resetButton.addEventListener("click",()=>{localStorage.clear(),window.location.reload()});